<div class="live-news-tv-slide">
    <!-- News Header -->
    <div id="news-header-container">
        <div class="news-header-bar">
            <div class="news-logo">
                <span class="logo-icon">📺</span>
                <span class="logo-text">SUNCOKE ENERGY</span>
            </div>
            <div class="live-indicator">
                <span class="live-dot"></span>
                <span>LIVE</span>
            </div>
            <div class="news-time" id="current-time">12:34 PM EST</div>
        </div>
    </div>

    <!-- Main Content -->
    <div id="main-content-container">
        <div class="main-chart-section">
            <div class="chart-header">
                <h3>📊 LIVE MARKET ANALYSIS</h3>
                <div class="chart-controls">
                    <button class="chart-btn active" onclick="updateChartType('steel')">Steel Index</button>
                    <button class="chart-btn" onclick="updateChartType('coke')">Coke Production</button>
                    <button class="chart-btn" onclick="updateChartType('sxc')">SXC Stock</button>
                </div>
            </div>
            
            <div class="chart-display">
                <svg width="100%" height="300" viewBox="0 0 600 300">
                    <defs>
                        <pattern id="grid" width="60" height="30" patternUnits="userSpaceOnUse">
                            <path d="M 60 0 L 0 0 0 30" fill="none" stroke="rgba(255,215,0,0.3)" stroke-width="1"/>
                        </pattern>
                    </defs>
                    <rect width="100%" height="100%" fill="url(#grid)" />
                    
                    <polyline id="chart-line" 
                        points="50,250 100,220 150,190 200,170 250,150 300,140 350,130 400,120 450,110 500,100 550,90"
                        fill="none" stroke="#00ff00" stroke-width="4"
                        style="filter: drop-shadow(0 0 10px #00ff00);">
                    </polyline>
                    
                    <circle cx="50" cy="250" r="5" fill="#ffd700" style="filter: drop-shadow(0 0 5px #ffd700);"/>
                    <circle cx="100" cy="220" r="5" fill="#ffd700" style="filter: drop-shadow(0 0 5px #ffd700);"/>
                    <circle cx="150" cy="190" r="5" fill="#ffd700" style="filter: drop-shadow(0 0 5px #ffd700);"/>
                    <circle cx="200" cy="170" r="5" fill="#ffd700" style="filter: drop-shadow(0 0 5px #ffd700);"/>
                    <circle cx="250" cy="150" r="5" fill="#ffd700" style="filter: drop-shadow(0 0 5px #ffd700);"/>
                    <circle cx="300" cy="140" r="5" fill="#ffd700" style="filter: drop-shadow(0 0 5px #ffd700);"/>
                    <circle cx="350" cy="130" r="5" fill="#ffd700" style="filter: drop-shadow(0 0 5px #ffd700);"/>
                    <circle cx="400" cy="120" r="5" fill="#ffd700" style="filter: drop-shadow(0 0 5px #ffd700);"/>
                    <circle cx="450" cy="110" r="5" fill="#ffd700" style="filter: drop-shadow(0 0 5px #ffd700);"/>
                    <circle cx="500" cy="100" r="5" fill="#ffd700" style="filter: drop-shadow(0 0 5px #ffd700);"/>
                    <circle cx="550" cy="90" r="5" fill="#ffd700" style="filter: drop-shadow(0 0 5px #ffd700);"/>
                    
                    <text x="60" y="30" fill="#ffd700" font-size="18" font-weight="bold" id="chart-title">📊 SXC Stock Price ($)</text>
                    <text x="520" y="290" fill="#ccc" font-size="14">Time →</text>
                    <text x="420" y="50" fill="#ffffff" font-size="20" font-weight="bold" id="current-value">Current: $8.21</text>
                </svg>
            </div>
        </div>

        <!-- Live Data Feed -->
        <div class="data-feed-section">
            <div class="data-grid">
                <div class="data-card">
                    <span class="data-label">SXC Stock</span>
                    <span class="data-value" id="sxc-price">$8.26</span>
                    <span class="data-change positive" id="sxc-change">+1.85%</span>
                </div>
                <div class="data-card">
                    <span class="data-label">Steel Production</span>
                    <span class="data-value" id="steel-price">81.2M</span>
                    <span class="data-change positive" id="steel-change">+3.2%</span>
                </div>
                <div class="data-card">
                    <span class="data-label">Coke Demand</span>
                    <span class="data-value" id="coke-price">94.2</span>
                    <span class="data-change positive" id="coke-change">+5.8%</span>
                </div>
                <div class="data-card">
                    <span class="data-label">Met Coal</span>
                    <span class="data-value" id="volume">$285/ton</span>
                    <span class="data-change positive" id="met-coal-change">+18.2%</span>
                </div>
            </div>
        </div>
    </div>

    <!-- Lower Third -->
    <div id="lower-third-container">
        <div class="news-ticker">
            <div class="ticker-label">BREAKING</div>
            <div class="ticker-content">
                <span id="ticker-text">SunCoke Energy Q4 strong • Coal +18.2% • Steel bullish • New contracts • 95% capacity • </span>
            </div>
        </div>
    </div>



<style>
:root {
    --news-primary: #c41e3a;
    --news-accent: #ffd700;
    --news-text: #ffffff;
    --news-bg: #0f0f0f;
}


.live-news-tv-slide {
    background: linear-gradient(135deg, #0f0f0f 0%, #1a1a1a 50%, #2d2d2d 100%);
    color: var(--news-text);
    padding: 0;
    margin: 0;
    min-height: 100vh;
    overflow-y: auto;
    position: relative;
    font-family: 'Arial', sans-serif;
}

.news-header-bar {
    background: linear-gradient(90deg, var(--news-primary) 0%, #8b0000 100%);
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 10px 25px;
    box-shadow: 0 2px 10px rgba(0,0,0,0.5);
    position: relative;
    z-index: 10;
}

.news-logo {
    display: flex;
    align-items: center;
    font-weight: bold;
    font-size: 1.3em;
}

.logo-icon {
    margin-right: 10px;
    font-size: 1.5em;
}

.live-indicator {
    display: flex;
    align-items: center;
    background: rgba(255,255,255,0.2);
    padding: 6px 15px;
    border-radius: 25px;
    font-weight: bold;
    font-size: 1em;
}

.live-dot {
    width: 10px;
    height: 10px;
    background: #ff0000;
    border-radius: 50%;
    margin-right: 8px;
    animation: pulse 1.5s infinite;
}

@keyframes pulse {
    0%, 100% { opacity: 1; transform: scale(1); }
    50% { opacity: 0.3; transform: scale(1.2); }
}

.news-time {
    font-weight: bold;
    font-size: 1em;
}

.main-chart-section {
    background: rgba(0,0,0,0.8);
    padding: 25px;
    border-radius: 15px;
    margin: 25px;
    border: 2px solid var(--news-accent);
    box-shadow: 0 0 20px rgba(255,215,0,0.3);
}

.chart-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 25px;
}

.chart-header h3 {
    color: var(--news-accent);
    margin: 0;
    font-size: 1.4em;
}

.chart-controls {
    display: flex;
    gap: 15px;
}

.chart-btn {
    background: rgba(255,255,255,0.1);
    color: white;
    border: 1px solid rgba(255,255,255,0.2);
    padding: 10px 20px;
    border-radius: 25px;
    cursor: pointer;
    transition: all 0.3s ease;
    font-size: 0.9em;
    font-weight: 500;
}

.chart-btn:hover,
.chart-btn.active {
    background: var(--news-primary);
    border-color: var(--news-primary);
    transform: translateY(-2px);
    box-shadow: 0 5px 15px rgba(196,30,58,0.4);
}

.chart-display {
    background: rgba(0,0,0,0.3);
    border-radius: 10px;
    border: 1px solid rgba(255,215,0,0.3);
    padding: 15px;
}

#chart-line {
    stroke-dasharray: 1500;
    stroke-dashoffset: 1500;
    animation: draw-line 4s ease-in-out infinite;
}

@keyframes draw-line {
    0% { stroke-dashoffset: 1500; }
    50% { stroke-dashoffset: 0; }
    100% { stroke-dashoffset: 1500; }
}

.data-feed-section {
    margin: 25px;
}

.data-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
    gap: 20px;
    margin-bottom: 25px;
}

.data-card {
    background: rgba(0,0,0,0.6);
    padding: 20px;
    border-radius: 12px;
    border: 1px solid rgba(255,255,255,0.1);
    display: flex;
    flex-direction: column;
    align-items: center;
    transition: transform 0.3s ease;
}

.data-card:hover {
    transform: translateY(-5px);
    box-shadow: 0 8px 25px rgba(255,215,0,0.2);
}

.data-label {
    font-size: 0.9em;
    color: #ccc;
    margin-bottom: 8px;
    text-transform: uppercase;
}

.data-value {
    font-size: 1.8em;
    font-weight: bold;
    color: var(--news-accent);
    margin-bottom: 5px;
}

.data-change {
    font-size: 0.9em;
    font-weight: bold;
}

.data-change.positive { color: #00ff00; }
.data-change.negative { color: #ff0000; }
.data-change.neutral { color: #ccc; }

.news-ticker {
    background: var(--news-primary);
    display: flex;
    align-items: center;
    padding: 12px 0;
    position: relative;
    overflow: hidden;
    width: 100%;
}

.ticker-label {
    background: #8b0000;
    color: white;
    padding: 8px 20px;
    font-weight: bold;
    font-size: 0.9em;
    white-space: nowrap;
    flex-shrink: 0;
    z-index: 2;
}

.ticker-content {
    flex: 1;
    overflow: hidden;
    white-space: nowrap;
    position: relative;
    height: 100%;
}

#ticker-text {
    display: inline-block;
    padding-left: 100%;
    animation: scroll-ticker-continuous 45s linear infinite;
    font-size: 0.95em;
    white-space: nowrap;
    font-weight: 500;
}

@keyframes scroll-ticker-continuous {
    0% { 
        transform: translateX(0%); 
    }
    100% { 
        transform: translateX(-100%); 
    }
}

@media (max-width: 768px) {
    #ticker-text {
        animation-duration: 35s;
        font-size: 0.85em;
    }
}

/* 🔧 FORCE SCROLL FIX - Add to your <style> section */
.reveal .slides section.present .live-news-tv-slide {
    height: 100vh !important;
    overflow-y: auto !important;
    overflow-x: hidden !important;
}

.reveal .slides section {
    overflow: visible;
}

.reveal .slides {
    overflow: visible !important;
}

/* Ensure ticker is always at bottom */
#lower-third-container {
    position: absolute !important;
    bottom: 0 !important;
    left: 0 !important;
    right: 0 !important;
    width: 100% !important;
    z-index: 1000 !important;
}


/* Add this rule to your chosen CSS file */
#main-content-container {
 
/*  bottom: 109px; *//* Adjust this value if needed */
  /* Keep any other existing styles for #main-content-container */
  top: auto;
/*  padding-bottom: 100px !important; */
 
}
body {
      display: flex; /* or grid */
      flex-direction: column; /* or define grid areas/rows */
      /* Adjust spacing as needed using gap, padding, or margins */
    }
</style>

<script>
console.log('📺 Live News TV slide loading...');

// 🔧 GLOBAL CHART FUNCTION - ALWAYS AVAILABLE
window.updateChartType = function(chartType) {
    console.log('🔄 Chart type changed to:', chartType);
    
    const title = document.getElementById('chart-title');
    const currentValue = document.getElementById('current-value');
    const chartLine = document.getElementById('chart-line');
    const circles = document.querySelectorAll('circle');
    
    // Update active button
    document.querySelectorAll('.chart-btn').forEach(btn => {
        btn.classList.remove('active');
        if (btn.getAttribute('onclick') && btn.getAttribute('onclick').includes(chartType)) {
            btn.classList.add('active');
        }
    });
    
    if (title && currentValue && chartLine) {
        let points = '';
        let circlePoints = [];
        let baseValue = 0;
        
        switch(chartType) {
            case 'steel':
                title.textContent = '📊 Steel Index ($/ton)';
                baseValue = 125.80;
                for (let i = 0; i < 11; i++) {
                    const x = 50 + (i * 50);
                    const variation = (Math.random() - 0.5) * 20;
                    const y = 250 - (baseValue + variation - 100) * 2;
                    const finalY = Math.max(50, Math.min(280, y));
                    points += `${x},${finalY} `;
                    circlePoints.push({x, y: finalY});
                }
                currentValue.textContent = `Current: $${(baseValue + (Math.random() - 0.5) * 5).toFixed(2)}`;
                break;
                
            case 'coke':
                title.textContent = '📊 Coke Production Capacity (%)';
                baseValue = 95;
                for (let i = 0; i < 11; i++) {
                    const x = 50 + (i * 50);
                    const variation = (Math.random() - 0.5) * 10;
                    const y = 250 - (baseValue + variation - 70) * 3;
                    const finalY = Math.max(50, Math.min(280, y));
                    points += `${x},${finalY} `;
                    circlePoints.push({x, y: finalY});
                }
                currentValue.textContent = `Current: ${(baseValue + (Math.random() - 0.5) * 3).toFixed(1)}%`;
                break;
                
            default: // sxc
                title.textContent = '📊 SXC Stock Price ($)';
                baseValue = 8.21;
                for (let i = 0; i < 11; i++) {
                    const x = 50 + (i * 50);
                    const variation = (Math.random() - 0.5) * 1;
                    const y = 250 - (baseValue + variation - 6) * 20;
                    const finalY = Math.max(50, Math.min(280, y));
                    points += `${x},${finalY} `;
                    circlePoints.push({x, y: finalY});
                }
                currentValue.textContent = `Current: $${(baseValue + (Math.random() - 0.5) * 0.5).toFixed(2)}`;
                break;
        }
        
        // Update chart line
        chartLine.setAttribute('points', points.trim());
        
        // Update circles
        circles.forEach((circle, index) => {
            if (circlePoints[index]) {
                circle.setAttribute('cx', circlePoints[index].x);
                circle.setAttribute('cy', circlePoints[index].y);
            }
        });
        
        // Restart animation
        chartLine.style.animation = 'none';
        setTimeout(() => {
            chartLine.style.animation = 'draw-line 2s ease-in-out';
        }, 50);
        
        console.log('✅ Chart updated successfully to:', chartType);
    }
};

// 🔧 LIVE NEWS TV MANAGER
window.liveNewsTVManager = {
    init() {
        console.log('📺 Live News TV Manager initialized');
        this.updateClock();
        this.startDataUpdates();
        this.startTickerUpdates();
        
        setInterval(() => this.updateClock(), 1000);
        setInterval(() => this.updateMarketData(), 30000);
    },
    
    updateClock() {
        const timeElement = document.getElementById('current-time');
        if (timeElement) {
            const now = new Date();
            const timeString = now.toLocaleTimeString('en-US', {
                hour: '2-digit',
                minute: '2-digit',
                hour12: true
            }) + ' EST';
            timeElement.textContent = timeString;
        }
    },
    
    startDataUpdates() {
        this.updateMarketData();
    },
    
    updateMarketData() {
        // Get data from market statistics to ensure perfect consistency
        const marketStatsData = {
            sxcPrice: '$8.26',
            sxcChange: '+1.85%',
            steelProduction: '81.2M',
            steelChange: '+3.2%',
            cokeDemand: '94.2',
            cokeChange: '+5.8%',
            metCoalPrice: '$285/ton',
            metCoalChange: '+18.2%'  // ← ADD THIS
        };

        // Update all cards with consistent data
        const updates = [
            { id: 'sxc-price', value: marketStatsData.sxcPrice },
            { id: 'sxc-change', value: marketStatsData.sxcChange },
            { id: 'steel-price', value: marketStatsData.steelProduction },
            { id: 'steel-change', value: marketStatsData.steelChange },
            { id: 'coke-price', value: marketStatsData.cokeDemand },
            { id: 'coke-change', value: marketStatsData.cokeChange },
            { id: 'volume', value: marketStatsData.metCoalPrice },
            { id: 'met-coal-change', value: marketStatsData.metCoalChange }  // ← ADD THIS
        ];

        updates.forEach(update => {
            const element = document.getElementById(update.id);
            if (element) {
                element.textContent = update.value;
                console.log(`✅ Updated ${update.id}: ${update.value}`);
            }
        });

        console.log('✅ Live News TV data 100% synchronized with Market Statistics');
    },
    
    startTickerUpdates() {
        this.newsRounds = [
            "SunCoke Energy Q4 earnings beat expectations • Met coal prices surge to $285/ton (+18.2%) • Steel production hits 81.2M tons (+3.2% YoY) • SXC stock $8.26 (+1.85%) • Coke demand index 94.2 (+5.8%) • ",
            "BREAKING: Steel sector outlook positive • SunCoke market share 15.2% • Environmental emissions down 8.2% • ESG rating improved to B+ Grade • Carbon credits $32.45/ton (+15.3%) • ",
            "MARKET UPDATE: Iron ore $118/ton (-8.5%) • Coke premium $145/ton (+12.7%) • Capacity utilization 78.5% • Steel ETF SLX +12.3% • SunCoke operations at 95% capacity • ",
            "INDUSTRY FOCUS: Energy transition creates opportunities • Metallurgical coal demand surges globally • SunCoke expands operations • Heat recovery technology advantage • "
        ];
        this.currentRound = 0;
        
        const tickerElement = document.getElementById('ticker-text');
        if (tickerElement) {
            this.updateNewsRound();
            setInterval(() => this.updateNewsRound(), 45000);
        }
    },

    updateNewsRound() {
        const tickerElement = document.getElementById('ticker-text');
        if (tickerElement && this.newsRounds) {
            tickerElement.textContent = this.newsRounds[this.currentRound];
            this.currentRound = (this.currentRound + 1) % this.newsRounds.length;
        }
    }
};

// 🔧 AUTO-UPDATE CHART DATA
setInterval(() => {
    const activeBtn = document.querySelector('.chart-btn.active');
    if (activeBtn && activeBtn.getAttribute('onclick')) {
        const onclickStr = activeBtn.getAttribute('onclick');
        const match = onclickStr.match(/updateChartType\('([^']+)'\)/);
        if (match) {
            window.updateChartType(match[1]);
        }
    }
}, 15000);

// 🔧 INITIALIZE EVERYTHING
setTimeout(() => {
    window.liveNewsTVManager.init();
    console.log('✅ Live News TV slide fully loaded');
}, 1000);
</script>